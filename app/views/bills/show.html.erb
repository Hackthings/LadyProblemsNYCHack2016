<p id="total-without-coverage"> Total without coverage: $<%= @bill.total_without_coverage %> </p>
<p id="insurance-company"> Insurance Company: <%= @bill.insurance_company %> </p>
<p id="policy-name"> Policy: <%= @bill.policy_name %> </p>
<p id="final-cost"> Final cost: $<%= sprintf "%.2f", @bill.final_cost %> </p>

<div id="bill-items">
  <p> Item Breakdown: </p>
  <% if @items %>
  <% count = 1 %>
    <% @items.each do |item| %>
      <div class="item" id="item-#{count}">
      Item: <%= item.item_name %><br>
      Price: $<%= sprintf "%.2f", item.price %><br>
      Quantity: <%= item.quantity ? item.quantity : "N/A" %><br>
      <% if @creator == current_user %>
        <%= link_to 'Edit', edit_bill_item_path(@bill, item) %>
        <%= link_to 'Delete this item', bill_item_path(@bill, item),
        method: :delete,
        data: {confirm: "Are you sure you want to delete this item?" } %>
      <% end %>
      <% count += 1 %>
      <br>
      </div>
    <% end %>
  <% else %>
    This user hasn't added any items.
  <% end %>
  <%= @creator == current_user ? (link_to "Add Item", new_bill_item_path(@bill)) : "" %>
</div>

<footer>
  <% if @bill.created_at.strftime("%m-%d-%Y") != @bill.updated_at.strftime("%m-%d-%Y") %>
	Bill last edited at: <%= @bill.updated_at.strftime("%m-%d-%Y") %>
  <% else %>
    Bill created at: <%= @bill.created_at.strftime("%m-%d-%Y") %><br>
  <% end %>

  <% if @creator  == current_user %>
  	<%= link_to 'Edit', edit_entry_bill_path(@bill) %>
  	<%= link_to 'Delete', entry_bill_path(@bill),
  	  method: :delete,
  	  data: {confirm: "Are you sure you want to delete this bill?" } %>
  <% end %>
</footer>
